---
title: "Forecast Metro train delays for NJ Transit"
author: "Jie Li, Xiong Zheng"
date: "12/10/2021"
output:
  html_document: 
    toc: yes
    toc_depth: 4
    toc_float: yes
    code_folding: hide
    theme: paper
  pdf_document: default
---

<style>
p.caption {
  font-size: 0.8em;
  text-align: center;
  font-weight: normal;
}
    caption {
      color: grey;
      font-size: 0.8em;
    }
@font-face{
  font-family: Helvetica; 
  src:url('Helvetica.ttf');
}
body{
  font-size: 11pt;
  font-family: Helvetica;
}
h1,h2,h3,h4,h5,h6{
  font-family: Helvetica;
}
td{
  font-size: 9pt;
  font-family: Helvetica;
}
th{
  font-size: 0.8em;
  font-family: Helvetica;
  color: black;
}
</style>
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# ```{r set_up,message = FALSE, warning = FALSE, results='hide'}
# crs = 'EPSG:26913'
# 
# library(stringr)
# library(tidyverse)
# library(sf)
# library(lubridate)
# library(tigris)
# library(gganimate)
# library(riem)
# library(gridExtra)
# library(knitr)
# library(kableExtra)
# library(FNN)
# library(spdep)
# library(caret)
# library(ckanr)
# library(grid)
# library(gridExtra)
# library(knitr)
# library(kableExtra)
# library(tidycensus)
# library(scales)
# library(stargazer)
# library(sjPlot)
# library(sjmisc)
# library(sjlabelled)
# library(mapview)
# library(ggmap)
# library(jsonlite)
# library(magick)
# library(magrittr)
# 
# root.dir = "https://raw.githubusercontent.com/urbanSpatial/Public-Policy-Analytics-Landing/master/DATA/"
# source("https://raw.githubusercontent.com/urbanSpatial/Public-Policy-Analytics-Landing/master/functions.r")
# 
# windowsFonts(font = windowsFont('Helvetica'))
# 
# ll <- function(dat, proj4 = 4326){st_transform(dat, proj4)}
# 
# plotTheme <- function(base_size = 9, title_size = 10){
#   theme(
#     text = element_text(family = 'font', color = "black"),
#     plot.title = element_text(family = 'font',
#                               size = title_size, colour = "black", hjust = 0.5), 
#     plot.subtitle = element_text(family = 'font', face = 'italic',
#                                  size = base_size, colour = "black", hjust = 0.5),
#     plot.caption = element_text(family = 'font', hjust=0),
#     axis.ticks = element_blank(),
#     panel.background = element_blank(),
#     panel.grid.major = element_line("grey80", size = 0.01),
#     panel.grid.minor = element_blank(),
#     panel.border = element_rect(colour = "black", fill=NA, size=.5),
#     strip.background = element_blank(),
#     strip.text = element_text(family = 'font', size=9),
#     axis.title = element_text(family = 'font', size=9),
#     axis.text = element_text(family = 'font', size=7),
#     axis.text.y = element_text(family = 'font', size=7),
#     plot.background = element_blank(),
#     legend.background = element_blank(),
#     legend.title = element_text(family = 'font', colour = "black", face = "italic", size = 9),
#     legend.text = element_text(family = 'font', colour = "black", face = "italic", size = 7),
#     strip.text.x = element_text(family = 'font', size = 9),
#     legend.key.size = unit(.5, 'line')
#   )
# }
# 
# mapTheme <- function(base_size = 9, title_size = 10){
#   theme(
#     text = element_text(family = 'font', color = "black"),
#     plot.title = element_text(family = 'font',
#                               size = title_size, colour = "black", hjust = 0.5), 
#     plot.subtitle = element_text(family = 'font', face = 'italic',
#                                  size = base_size, colour = "black", hjust = 0.5),
#     plot.caption = element_text(family = 'font', hjust=0),
#     axis.ticks = element_blank(),
#     panel.background = element_blank(),
#     panel.grid.major = element_blank(),
#     panel.grid.minor = element_blank(),
#     panel.border = element_blank(),
#     strip.background = element_blank(),
#     strip.text = element_text(family = 'font', size=9),
#     axis.title = element_text(family = 'font', size=9),
#     axis.text = element_text(family = 'font', size=7),
#     axis.text.y = element_text(family = 'font', size=7),
#     plot.background = element_blank(),
#     legend.background = element_blank(),
#     legend.title = element_text(family = 'font', colour = "black", face = "italic", size = 9),
#     legend.text = element_text(family = 'font', colour = "black", face = "italic", size = 7),
#     strip.text.x = element_text(family = 'font', size = 9),
#     legend.key.size = unit(.5, 'line')
#   )
# }
# 
# brightRed = '#f2727f'
# darkBlue = '#315d7f'
# palette5 <- c("#f9b294","#f2727f","#c06c86","#6d5c7e","#315d7f")
# palette4 <- c("#f9b294","#f2727f","#c06c86","#6d5c7e")
# palette2 <- c("#f9b294","#f2727f")
# palette1_main <- "#F2727F"
# palette1_assist <- '#F9B294'
# ```

```{r ReadGif for byStationByDayOfWeek, echo=FALSE,fig.height = 3,out.width = '50%',fig.align = 'center'}
knitr::include_graphics("byStationByHourAnimation.gif")
```